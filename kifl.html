<head>
    <title>kifl</title>
</head>

<body>
    {{> page}}
</body>

<template name="page">
    {{> createDialog}}
    <div class="container">
        {{> grid}}
    </div>
</template>


<template name="grid">
    <div class="grid">
        {{>column source='source' id='backlog'}}
        {{>column id='sprint'}}
        {{>column id='doing'}}
        {{>column id='done'}}
    </div>
</template>

<template name="column">
    <div class="grid__column {{source}}" id="{{id}}">
        <h2>{{id}}</h2>
        {{#if source}}
        <a href="" class="createCard">&oplus;</a>
        {{/if}}
        {{#each cards id}}
            {{>card}}
        {{/each}}
    </div>
</template>

<template name="card">
    <div class="card" draggable="true" id="{{_id}}" style="background-color: {{color}}">
        <h3>{{title}}</h3>
    </div>
</template>

<template name="createDialog">
    <div class="modal fade" id="createDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close cancel" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">{{#if isEditing}}Edit {{else}}Add {{/if}} Card</h4>
                </div>
                <div class="modal-body">
                    {{#if error}}
                    <div class="alert alert-error">{{error}}</div>
                    {{/if}}
                    {{#with editCard}}
                        <label>Title</label>
                        <input type="text" class="title span5" value="{{title}}">

                        <label>Description</label>
                        <textarea class="description span5">{{description}}</textarea>
                    {{/with}}
                </div>
                <div class="modal-footer">
                    {{#if isEditing}}
                        <button type="button" class="btn btn-delete delete" data-dismiss="modal">Delete</button>
                    {{/if}}
                    <button type="button" class="btn btn-default cancel" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary save">Save</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</template>
